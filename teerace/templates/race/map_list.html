{% extends "race/map_base.html" %}{% load human_duration %}{% load pagination_tags %}
{% comment %}
context variables:
	object_list
	paginator
	map_types
	filtered_type
{% endcomment %}
{% block submenu %}
	<ul class="left">
		<li><a href="{% url maps %}">All</a></li>{% for type in map_types %}<li><a href="{% url maps__type type.slug %}">{{ type.displayed_name }}</a></li>{% endfor %}
	</ul>
{% endblock submenu %}
{% block breadcrumb %}
	{{ block.super }}
{% if filtered_type %}
	{% load breadcrumb_tags %}
	{% add_crumb filtered_type 'maps__type' filtered_type.slug %}
{% endif %}
{% endblock %}
{% block content %}
		{% autopaginate object_list %}
		{% paginate %}
		{% for map in object_list %}
		<div class="box map {% cycle 'left' 'right' %}">
			<div class="right">
				{% if not map.grenade_count %}<div sprite="grenade" title="There is grenade launcher"></div>{% endif %}
				{% if not map.has_unhookables %}<div sprite="unhookable" title="There are unhookable tiles"></div>{% endif %}
				{% if not map.has_deathtiles %}<div sprite="deathtiles" title="There are death tiles"></div>{% endif %}
			</div>

			<div class="header">
				<a href="{{ map.get_absolute_url }}">{{ map.name }}</a>
			</div>
			<table>
				<tr>
					<th>Completions:</th>
					<th>Average score:</th>
					<th>Best score:</th>
				</tr>
				<tr>
					<td>{{ map.run_count }}</td>
					<td>{{ map.average_score|floatformat:settings.RESULT_PRECISION|default:"-" }}</td>
					<td>{% if map.best_score %}{{ map.best_score.time }} by <a href="{{ map.best_score.user.get_absolute_url }}">{{ map.best_score.user }}</a>{% else %}-{% endif %}</td>
				</tr>
			</table>
		</div>
		{% empty %}
		<div class="box full">
			No maps were found.
		</div>
		{% endfor %}
		{% paginate %}
{% endblock content %}
